<!DOCTYPE html>

<html dir="rtl" class="no-js">

<head>

</head>

<body>

  
  <div *ngFor="let user of usersList" class="rectangle1" >
    <div *ngIf="user.role=='مُشْرِف'; else simpleUser">
    <div style="width:320px;position:relative;top:20px;">
      <button style="background-color: Transparent;border:none;outline:none;" (click)="afficherProjets()"><img src="../assets/images/picture19.png" width="210" height="50"
        style="margin-right:80px;"></button>
    </div>

    <div style="position:relative;right:550px;bottom:93px;display:inline-block;">
      <button (click)="afficherUtilisateurs()" style="background-color:transparent;border:none;outline:none;"><img src="../assets/images/square-icon.png" width="90" height="70"
       style="border-radius: 10%"   ></button>
      </div>

      <div style="position:relative;right:650px;bottom:93px;display:inline-block;">
        <button (click)="afficherUserProfilProjet()" style="background-color:transparent;border:none;outline:none;"><img src="../assets/images/secondSquare.jpg" width="90" height="70"
         style="border-radius: 10%"   ></button>
        </div>
    
      <div class="dropdown1"
        style="position: relative;right:780px;bottom:52px;height:80px;">

        <img class="card-img-top img-responsive" src="{{this.webService.serverUrl+'Imgarticles/'+user.username}}"
        style="height :55px;width:55px; border-radius: 50%;position:relative;top:15px;right:100px;" alt="">
        
        <button style="position: relative;bottom:40px;right:20px;" class="dropbtn1">
          <mat-icon style="position: relative;top:7px;">arrow_drop_down</mat-icon> مرحبا {{user.username}}
        </button>
     
        <div class="dropdown-content1 dropdown-menu-center1 " style="z-index: 2;top:82px">
          <button class="myButton" style="border:none;padding-top:15px;padding-bottom:15px;width:200px;background-color:#f6f6f6;" (click)="updateUserCurrent(user)"> تعديل بيانات الحساب  </button>
          <button class="myButton" style="border:none;padding-top:15px;padding-bottom:15px;width:200px;background-color:#f6f6f6;" (click)="loggedOut()"> خروج </button>
        </div>
      </div>
   
    </div>


  <ng-template #simpleUser>
    <div style="width:320px;position:relative;top:20px;">
      <button style="background-color: Transparent;border:none;outline:none;" (click)="afficherProjets()"><img src="../assets/images/picture19.png" width="210" height="50"
        style="margin-right:80px;"></button>
      </div>
  
  
      
        <div *ngFor="let user of usersList" class="dropdown1"
          style="position: relative;right:980px;bottom:52px;height:80px;">
  
          <img class="card-img-top img-responsive" src="{{this.webService.serverUrl+'Imgarticles/'+user.username}}"
          style="height :55px;width:55px; border-radius: 50%;position:relative;top:15px;right:100px;" alt="">
          
          <button style="position: relative;bottom:40px;right:20px;" class="dropbtn1">
            <mat-icon style="position: relative;top:7px;">arrow_drop_down</mat-icon> مرحبا {{user.username}}
          </button>
       
          <div class="dropdown-content1 dropdown-menu-center1 " style="z-index: 2;top:82px">
            <button class="myButton" style="border:none;padding-top:15px;padding-bottom:15px;width:200px;background-color:#f6f6f6;" (click)="updateUserCurrent(user)"> تعديل بيانات الحساب  </button>
            <button class="myButton" style="border:none;padding-top:15px;padding-bottom:15px;width:200px;background-color:#f6f6f6;" (click)="loggedOut()"> خروج </button>
          </div>
        </div>
  </ng-template>

  </div>

  <div style="width:400px;position:relative;right:500px;bottom:30px;">
    <img src="../assets/images/Sans titre.png" width="350" height="80"
        >
    </div>



  <div class="rectangle3" style="height : 4000px">
    <div style="background-image: url('../assets/images/shutterstock_1247187910-1280x720.jpeg')" class="rectangle2">
    </div>
    <div class="rectangle4">

     



      <ul style="list-style: none;">



        <li style="float:right">
          <div class="dropdown1">
            <button class="dropbtn1"> تحديد المشروع
            </button>
            <div class="dropdown-content1 dropdown-menu-center1">
             
              <button class="myButton" style="border:none;padding-top:15px;padding-bottom:15px;width:200px;background-color:#f6f6f6;" (click)="afficherFinancements(firstDialog,secondDialog)">مصادر التمويل </button>
              <button class="myButton" style="border:none;padding-top:15px;padding-bottom:15px;width:200px;background-color:#f6f6f6;" (click)="afficherDecompositions(firstDialog,secondDialog)"> تقسيم المشروع </button>

            </div>
          </div>
        </li>


        <li style="float:right;position:relative;right:150px;">
          <div class="dropdown1">
            <button class="dropbtn1"> متابعة المشروع
            </button>
            <div class="dropdown-content1 dropdown-menu-center1">
             
              <button class="myButton" style="border:none;padding-top:15px;padding-bottom:15px;width:200px;background-color:#f6f6f6;" (click)="afficherAppelsOffre(firstDialog,secondDialog)"> متابعة سوق المشروع  </button>

           
              <button class="myButton" style="border:none;padding-top:15px;padding-bottom:15px;width:200px;background-color:#f6f6f6;" (click)="afficherAvancementMarche(firstDialog,secondDialog)">  المتابعة المادية للمشروع </button>

            </div>
          </div>
        </li>



        <li style="float:right;position:relative;right:300px;">
          <div class="dropdown1">
            <button class="dropbtn1"> تقييم المشروع
            </button>
            <div class="dropdown-content1 dropdown-menu-center1">
              <button class="myButton" style="border:none;padding-top:15px;padding-bottom:15px;width:200px;background-color:#f6f6f6;" (click)="afficherObjectifs(firstDialog,secondDialog)">   الأهداف والمؤشرات   </button>

             
            </div>
          </div>
        </li>


     






      </ul>

    </div>
    <br>
    <br>

    <mat-accordion >

    <div class="container">
      <br>
      <br>
      <br>
      <br>
      <div class="row" style="text-align: center;">
        <img src="../assets/images/thebrowntitle.png" width="300" height="110">
        <h1 style="color:white;text-align: center;position:relative;bottom:87px;"> التمويل الحكومي </h1>
      </div>
      
      <div style="position: relative;right:50px;top:20px;width:50px;height:65px;">
      <a  routerLink="/afficherFinancements" (click)="downloadPdf()">
         <img src="../assets/images/logoiconpdf.png" width="50px" height="60px" style="border-radius: 5px;">
      </a>
    </div>
  

      <br>

      <table style="margin-right:auto;margin-left:auto;border: 2px solid #cccccc" class="table-table-hover1">
        <thead>
          <tr>
           

            <th> الرمز </th>

            <th> التسمية </th>
            <th> المبلغ   </th>
            <th>تاريخ التمويل</th>
            <th>المبلغ محيّن</th>
            <th>تاريخ التحيين</th>
            
            <th>التفاصيل </th>

            <th> تعديل </th>

            <th> حذف </th>


          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let projet of projetsList">

           

            <td>{{projet.code_financement_public}}</td>

            <td>{{projet.libelle_financement_public}}</td>
            <td>{{projet.montant_financement_public}}</td>
            <td>{{projet.date_financement_public}}</td>
            <td>{{projet.montant_financement_public_actualise}}</td>
            <td>{{projet.date_actualisation_financement_public}}</td>
           
           <td><a routerLink="" (click)="afficherDetailsFinancementPublic()">
                <mat-icon style="color:green">assignment
                </mat-icon>
              </a></td>

            <td>
              <span style="margin-right: 10px"><button style=" border: none;background-color: white;"
                  (click)="update_financementPublic(projet)" class="btn btn-primary mb-2">
                  <mat-icon style="color:blue">create</mat-icon>
                </button> </span> </td>
            <td><span><button style=" border: none;background-color: white;"
                  (click)="deleteFinancementPublic()" class="btn btn-primary mb-2">
                  <mat-icon style="color:red">delete_outline</mat-icon>
                </button></span>
            </td> 


          </tr>

        </tbody>
      </table>

    </div>
    <br>
    <br>
    <app-ajouter-financement-public></app-ajouter-financement-public>

    <br>
    <br>
    <br>
    <br>
    <br>


    <div class="container">
      <div class="row" style="text-align: center;">
        <img src="../assets/images/thebrowntitle.png" width="350" height="110">
        <h1 style="color:white;text-align: center;position:relative;bottom:87px;">قائمة التمويلات الأجنبية </h1>
      </div>
      
      <div style="position: relative;right:50px;top:20px;width:50px;height:65px;">
      <a  routerLink="/afficherProjets" (click)="downloadPdf()">
         <img src="../assets/images/logoiconpdf.png" width="50px" height="60px" style="border-radius: 5px;">
      </a>
    </div>


      <div style="position:relative;right:800px;bottom:25px;height:40px;width:300px;">
        <input class="form-control" style="width: 200px;" type="text" [(ngModel)]="recherche2">
        <button class="btn btn-primary" (click)="rechercherFinancementEtranger(recherche2)"
          style="border:none;background-color:#c69c6d;height:35px;position: relative;right:210px;bottom:35px;"><span
            style="position: relative;bottom:8px;">بحث</span> &nbsp; <mat-icon
            style="margin-top:0;padding-top:0;height:7px;width:15px;">search</mat-icon></button>
      </div>

      <br>
      <table style="margin-right:auto;margin-left:auto;border: 2px solid #cccccc" class="table-table-hover1">
        <thead>
          <tr>
           

            <th>الرمز</th>

            <th> التسمية </th>
          

            <th> العملة </th>
            <th> المبلغ بالدينار التونسي  </th>
            <th> المبلغ بالعملة محيّن  </th>
            <th>تاريخ التحيين</th>
            <th>الممول </th>
            <th>بلد التمويل</th>
            <th>تاريخ الامضاء </th>
            <th>تاريخ الإنطلاق </th>
            <th>تاريخ الإنتهاء </th>
            <th>آخر أجل للتمويل </th>
            <th>تفاصيل</th>

            <th> تعديل </th>
            <th> حذف </th>


          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let financementEtranger of financementsEtrangersList | paginate: { itemsPerPage: 5, currentPage: p1 }">

            

            <td>{{financementEtranger.code}}</td>
            <td>{{financementEtranger.libelle}}</td>
           
            <td>{{financementEtranger.devise}}</td>
            <td>{{financementEtranger.montant_dt}}</td>
            <td>{{financementEtranger.montant_actualise}}</td>
            <td>{{financementEtranger.date_actualisation}}</td>
            <td>{{financementEtranger.financeur}}</td>
            <td>{{financementEtranger.pays_financement}}</td>

            <td>{{financementEtranger.date_signature}}</td>
            <td>{{financementEtranger.date_debut}}</td>
            <td>{{financementEtranger.date_cloture}}</td>
            <td>{{financementEtranger.date_delai}}</td>
            <td><a routerLink="" (click)="afficherDetailsFinancementEtranger(financementEtranger)">
                <mat-icon style="color:green">assignment
                </mat-icon>
              </a></td>

            <td>
              <span style="margin-right: 10px"><button style=" border: none;background-color: white;"
                  (click)="update_financementEtranger(financementEtranger)" class="btn btn-primary mb-2">
                  <mat-icon style="color:blue">create</mat-icon>
                </button> </span> </td>
            <td><span><button style=" border: none;background-color: white;"
                  (click)="deleteFinancementEtranger(financementEtranger)" class="btn btn-primary mb-2">
                  <mat-icon style="color:red">delete_outline</mat-icon>
                </button></span>
            </td>

          </tr>
        </tbody>
      </table>
    </div>

    <br>
    <div style="text-align: center;">
      <pagination-controls (pageChange)="p1 = $event" previousLabel="الصفحة السابقة" nextLabel="الصفحة الموالية">
      </pagination-controls>
    </div>
    <br>


    <app-ajouter-financement-etranger> </app-ajouter-financement-etranger>




    <br>
    <br>
    <br>
    <br>
    <br>

    <div class="container">
      <div class="row" style="text-align: center;">
        <img src="../assets/images/thebrowntitle.png" width="350" height="110">
        <h1 style="color:white;text-align: center;position:relative;bottom:87px;">قائمة التمويلات الأخرى </h1>
      </div>
      
      <div style="position: relative;right:50px;top:20px;width:50px;height:65px;">
      <a  routerLink="/afficherProjets" (click)="downloadPdf()">
         <img src="../assets/images/logoiconpdf.png" width="50px" height="60px" style="border-radius: 5px;">
      </a>
    </div>


      <div style="position:relative;right:800px;bottom:25px;height:40px;width:300px;">
        <input class="form-control" style="width: 200px;" type="text" [(ngModel)]="recherche3">
        <button class="btn btn-primary" (click)="rechercherAutreFinancement(recherche3)"
          style="border:none;background-color:#c69c6d;height:35px;position: relative;right:210px;bottom:35px;"><span
            style="position: relative;bottom:8px;">بحث</span> &nbsp; <mat-icon
            style="margin-top:0;padding-top:0;height:7px;width:15px;">search</mat-icon></button>
      </div>

      <br>

      <table style="margin-right:auto;margin-left:auto;border: 2px solid #cccccc" class="table-table-hover1">
        <thead>
          <tr>
          
            <th> الرمز </th>

            <th> التسمية   </th>
            <th> المبلغ بالدينار التونسي </th> 
            <th>تاريخ التمويل</th>
            <th>المبلغ محيّن</th>
            <th>تاريخ التحيين</th>
            <th>تفاصيل </th>
            <th> تعديل</th>
            <th>حذف</th>


          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let autreFinancement of autresFinancementsList | paginate: { itemsPerPage: 5, currentPage: p2 }">

        
            <td>{{autreFinancement.code}}</td>

            <td>{{autreFinancement.libelle}}</td>
            <td>{{autreFinancement.montant}}</td>
            <td>{{autreFinancement.date_autre_financement}}</td>
            <td>{{autreFinancement.montant_actualise}}</td>
            <td>{{autreFinancement.dateFinancement}}</td>
            <td><a routerLink="" (click)="afficherDetailsAutreFinancement(autreFinancement)">
                <mat-icon style="color:green">assignment
                </mat-icon>
              </a></td>

            <td>
              <span style="margin-right: 10px"><button style=" border: none;background-color: white;"
                  (click)="updateAutreFinancement(autreFinancement)" class="btn btn-primary mb-2">
                  <mat-icon style="color:blue">create</mat-icon>
                </button> </span> </td>
            <td><span><button style=" border: none;background-color: white;"
                  (click)="deleteAutreFinancement(autreFinancement)" class="btn btn-primary mb-2">
                  <mat-icon style="color:red">delete_outline</mat-icon>
                </button></span>
            </td>

          </tr>

        </tbody>
      </table>

    </div>
    <br>
    <div style="text-align: center;">
      <pagination-controls (pageChange)="p2 = $event" previousLabel="الصفحة السابقة" nextLabel="الصفحة الموالية">
      </pagination-controls>
    </div>

    <br>
    <br>
    <app-ajouter-autre-financement></app-ajouter-autre-financement>
  </mat-accordion>
  <div style="position:relative;right:250px;">
  <iframe src="http://localhost:5601/app/kibana#/visualize/edit/89ec6ed0-3627-11eb-b411-8f1817c90169?embed=true&_g=(refreshInterval%3A(pause%3A!t%2Cvalue%3A0)%2Ctime%3A(from%3Anow-150y%2Cto%3Anow))" height="600" width="800"></iframe>
  </div>
</div>
  <ng-template #firstDialog>
    <div style="background-color:#f0f0f0;padding-bottom:45px;">
    <button style="border:none;outline:none;background-color: Transparent;" mat-dialog-close> <mat-icon>clear</mat-icon> </button>
   <br>
   <br>
    <div style="text-align:center;font-size:20px;">
    عليك أولا إختيار مشروع
  </div>
</div>
  </ng-template>


  <ng-template #secondDialog>
    <div style="background-color:#f0f0f0;padding-bottom:45px;">
    <button style="border:none;outline:none;background-color: Transparent;" mat-dialog-close> <mat-icon>clear</mat-icon> </button>
   <br>
   <br>
    <div style="text-align:center;font-size:20px;">
      هذه المهمّة ليست ضمن صلاحياتك في هذا المشروع 
  </div>
</div>
  </ng-template>
</body>

</html>




<!--
                  <button (click)="openChildComponent2()" style="background: rgba(246, 246, 246, 0);border:none;outline: none;">
                      <div *ngIf="b%2 === 1;else add"><b style="font-size: 35px;color: grey;">no</b></div>
                      <ng-template #add>
                          <b style="font-size: 35px;color: grey;">yes</b>
                      </ng-template>
                  </button>
      <div class="form-group">
          
          <div *ngIf="b%2 === 1">
              <app-ajouter-financement-etranger>  </app-ajouter-financement-etranger>
        </div>
        </div> 
      -->